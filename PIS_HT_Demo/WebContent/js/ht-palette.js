!function(J,f,z){"use strict";var g="px",q="0",d="innerHTML",C="className",Q=ht.Default,P=ht.Color,r=ht.Node,Y="position",v="top",X="left",H=Q.animate,l=Q.getInternal(),T="width",q="0",n="none",m="max-height",i="font",t="background",e="border-box",$="user-select",M="box-sizing",F="overflow",A=Q.isTouchable,l=Q.getInternal(),_=P.titleIconBackground,E=Q.scrollBarInteractiveSize,S=/msie 9/.test(J.navigator?J.navigator.userAgent.toLowerCase():""),B=null,y=function(){return document},N=function(p){return y().createElement(p)},k=function(){return N("div")},U=function(){var M=k(),d=M.style;return d.msTouchAction=n,d.cursor="default",A&&d.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",B),d.position="absolute",d.left=q,d.top=q,M},j=function(){return N("canvas")},w=function(){return document.body},b=function(s,D,x){s.style.setProperty(D,x,B)},G=function(b,R){b.style.removeProperty(R)},p=function(i,D,n){Q.def(ht.widget[i],D,n)},I=function(z,Y){z.appendChild(Y)},L=function(R,W){R.removeChild(W)},O=function(k,G,n,Y){k.addEventListener(G,n,!!Y)};l.addMethod(Q,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:_,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:_}]},paletteTitleLabelColor:Q.labelSelectColor,paletteTitleLabelFont:Q.labelFont,paletteContentLabelFont:Q.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:Q.widgetTitleHeight,paletteTitleBackground:P.titleBackground,paletteTitleHoverBackground:P.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:z,paletteItemHoverBorderColor:P.highlight,paletteItemSelectBackground:P.highlight},!0);var D=".palette-item:hover{border: 1px solid "+Q.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+Q.paletteTitleHoverBackground+" !important}",V=document.createElement("style");A||(V.styleSheet?V.styleSheet.cssText=D:V.appendChild(y().createTextNode(D))),y().getElementsByTagName("head")[0].appendChild(V);var a=function(L){var o=this;o.$22h=L,o.addListeners()};Q.def(a,f,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var f=this;f.$36h&&w().removeChild(f.$36h),f.$23h=f.$24h=f.$25h=f.$35h=f.$36h=B},handle_touchstart:function(W){for(var A,c=this,a=c.$22h,D=W.target,K=a.sm(),Y=a.dm(),V="palette-header",J="palette-header-tool",e="palette-item",x=!1,l=!1,T=!1;D&&(D[C]||"").indexOf(V)<0&&(D[C]||"").indexOf(e)<0;)D=D.parentNode;if(D&&D[C].indexOf(J)>=0?x=!0:D&&D[C].indexOf(V)>=0?T=!0:D&&D[C].indexOf(e)>=0&&(l=!0),Q.isLeftButton(W))if(c.$27h(W))c.$24h=Q.getClientPoint(W),c.$25h=a.ty();else if(x){Q.preventDefault(W),A=D.parentNode.$11h;var Z=Y.getDataById(A),r=Z.s("tools")[D.toolIndex];r.action&&r.action.call(a)}else if(T){Q.preventDefault(W),A=D.$11h;var Z=Y.getDataById(A);Z.isExpanded()?Z.setExpanded(!1):Z.setExpanded(!0)}else if(l){A=D.$11h;var s=Y.getDataById(A);K.ss(s),a.handleDragAndDrop&&(Q.preventDefault(W),s.s("draggable")&&(a.handleDragAndDrop(W,"prepare"),c.$35h=0)),s.s("draggable")||(Q.preventDefault(W),c.$24h=Q.getClientPoint(W),c.$25h=a.ty())}else Q.preventDefault(W),c.$24h=Q.getClientPoint(W),c.$25h=a.ty();else c.$26h(W)},handle_mousedown:function(C){this.handle_touchstart(C)},handle_mousewheel:function(B){this.handleScroll(B,B.wheelDelta/40,B.wheelDelta!==B.wheelDeltaX)},handle_DOMMouseScroll:function(g){this.handleScroll(g,-g.detail,1)},handleScroll:function(j,s,P){var G=this.$22h;Q.preventDefault(j),P&&G._41o()&&G.ty(G.ty()+20*s)},handle_mouseup:function(x){this.handle_touchend(x)},handle_touchend:function(p){var n=this;n.$37h(p),n.$26h(p)},handleWindowMouseUp:function(I){this.handleWindowTouchEnd(I)},handleWindowTouchEnd:function(c){var B=this;B.$37h(c),B.$26h(c)},$37h:function(S){var L=this,M=L.$22h;2===L.$35h&&(L.$35h=3,M.handleDragAndDrop(S,"end"))},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(q){var N=this,K=N.$22h,L=N.$23h,k=N.$24h,x=N.$25h,d=Q.getClientPoint(q),n=K._29I,s=N.$36h;if(1===N.$35h||2===N.$35h){if(N.$35h=2,K.handleDragAndDrop(q,"between"),A){var m=q.touches[0];q=m?m:q.changedTouches[0]}s.style.left=q.pageX-parseInt(s.width)/2+g,s.style.top=q.pageY-parseInt(s.height)/2+g}else"p"===L?K.ty(x+d.y-k.y):"v"===L&&K.ty(x+(k.y-d.y)/n.height*K._59I)},handle_mousemove:function(G){this.handle_touchmove(G)},handle_touchmove:function(I){if(!Q.isDragging()&&Q.isLeftButton(I)){var d=this,$=d.$22h,y=d.$27h(I);if(d.$24h){if(!d.$23h){if(Q.getDistance(Q.getClientPoint(I),d.$24h)<2)return;d.$23h=y?"v":"p",Q.startDragging(d)}}else if(y)$._43o();else if(0===d.$35h){if(d.$35h=1,$.handleDragAndDrop(I,"begin"),A){var V=I.touches[0];I=V?V:I.changedTouches[0]}var f=d.$36h=new Image,o=$.$10h[$.sm().ld().getId()].querySelector(".image-box"),n=parseInt(o.style.width),X=parseInt(o.style.height);f.draggable=!1,f.src=o.toDataURL(),f.width=n,f.height=X,f.style.position="absolute",f.style.left=I.pageX-n/2+g,f.style.top=I.pageY-X/2+g,w().appendChild(f),Q.startDragging(d)}}},$27h:function(i){var W=this.$22h,X=W.getView(),H=X.getBoundingClientRect(),g=W._29I,t=i.clientX-H.left+X.scrollLeft;return W._41o()&&g.x+g.width-t<E}}),ht.widget.Palette=function(E){var c=this,H=c._view=l.createView(null,c);c.$9h={},c.$10h={},c.$4h={},c._29I={x:0,y:0,width:0,height:0},c._59I=0,c.dm(E?E:new ht.DataModel),H[C]="ht-widget-palette",c.$29h=new a(c),b(H,t,Q.paletteContentBackground),b(H,F,"auto"),b(H,M,e),b(H,"-moz-"+M,e),b(H,"-webkit-"+$,n),b(H,"-moz-"+$,n),b(H,"-ms-"+$,n),b(H,$,n),b(H,"position","absolute"),b(H,"overflow","hidden"),I(H,c._79O=U()),O(H,"dragstart",function(b){b.dataTransfer&&(b.dataTransfer.setData("Text","nodeid:"+b.target.$11h),b.dataTransfer.effectAllowed="all",c.$29h.$26h())})},p("Palette",f,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:Q.autoHideScrollBar,_scrollBarSize:Q.scrollBarSize,_scrollBarColor:Q.scrollBarColor,getViewRect:function(){return this._29I},ty:function(U){return U?(this.setTranslateY(U),void 0):this.getTranslateY()},setTranslateY:function(U){if(this.$32h==B){var A=this,d=A.$33h(U),S=A.$30h;A.$30h=d,A.fp("translateY",S,d)}},getTranslateY:function(){return this.$30h},setLayout:function(L){var E,h,_=this,D=_._layout;_._layout=L,"smallicons"===L?E=h=20:"iconsonly"===L?E=h=50:(E=70,h=50),_.setItemImageWidth(E),_.setItemImageHeight(h),_.setItemImagePadding(4),_.fp("layout",D,L)},getDataAt:function(U){for(var c=U.target;c&&c.$11h==B;)c=c.parentNode;return c&&c.$11h!=B?this.getDataModel().getDataById(c.$11h):void 0},$20h:function(){var X=16;return A&&(X*=1.2),X},$19h:function(){return Q.paletteTitleHeight},$18h:function(){var t=Q.paletteSeparatorWidth,F=Q.paletteTitleBackground,$=Q.paletteSeparatorColor||Q.brighter(F);return t+g+" solid "+$},$17h:function(y){b(y,"cursor","pointer"),b(y,"display","inline-block"),b(y,"margin-right",(A?8:4)+g),b(y,"vertical-align",v)},$1h:function(R){var Z=this,c=k(),w=k(),P=N("span");c[C]="palette-header",b(c,Y,"relative"),b(c,t,Q.paletteTitleBackground),b(c,"color",Q.paletteTitleLabelColor),b(c,v,q),b(c,M,e),b(c,"-moz-"+M,e),b(c,"padding","0 5px 0 0"),b(c,"border-top",Z.$18h()),b(c,T,"100%"),b(c,"cursor","pointer"),b(c,"white-space","nowrap"),b(c,F,"hidden"),b(c,i,Q.paletteTitleLabelFont),b(c,"line-height",Z.$19h()+g),c.$11h=R.getId();var o=j(),A=Z.$19h(),x=Z.$20h();Z.$17h(o),l.setCanvas(o,x,A),I(c,o);var E=R.s("tools");if(E)for(var X=0;X<E.length;X++){var z=j();Z.$17h(z),l.setCanvas(z,x,A),z[C]="palette-header-tool palette-header-tool"+R.getId()+"-"+X,z.style.position="absolute",z.style.right=(x+10)*X+"px",z.toolIndex=X,I(c,z)}return o[C]="palette-toggle-icon-"+R.getId(),w[C]="palette-content",b(w,"max-height",0+g),b(w,i,Q.paletteContentLabelFont),b(w,F,"hidden"),w.$11h=R.getId(),Z.$9h[R.getId()]=w,P[d]=R.getName(),b(P,i,Q.paletteTitleLabelFont),I(c,o),I(c,P),[c,w]},$2h:function(M){var u=this,o=u._layout,x=S&&M.s("draggable")?N("a"):k(),c=j(),D=k(),h=M.getName()||"",i=M.s("title")||M.getToolTip()||h,A=u._itemMargin;c[C]="image-box";var $=u.getItemImageWidth(),L=u.getItemImageHeight();return l.setCanvas(c,$,L),I(x,c),D[d]=h,D[C]="label-box","iconsonly"!==o&&I(x,D),x[C]="palette-item",b(x,"vertical-align",v),b(x,"cursor","pointer"),b(x,"border-radius",5+g),b(x,"border","1px solid transparent"),b(x,"text-align","center"),b(x,"display","inline-block"),b(x,"margin-left",A+g),b(x,"margin-top",A+g),b(x,"color",Q.paletteContentLabelColor),"smallicons"===o?(b(c,"vertical-align","middle"),b(x,"margin-left",2+g),b(x,"margin-top",2+g),b(x,"padding",2+g),b(x,"text-align",X),b(D,"display","inline-block"),b(D,"min-width",u.$21h+u._itemMargin+g)):"largeicons"===o&&(b(D,"max-width",$+g),b(D,"overflow","hidden")),x.$11h=M.getId(),i&&(x.title=i),M.s("draggable")&&!u.handleDragAndDrop&&(S?(x.href="#",b(x,"text-decoration",n)):x.draggable="true"),x},$16h:function(N,C,g,P){var Y=l.initContext(N);l.translateAndScale(Y,0,0,1),Y.clearRect(0,0,g,g);var S=(g-P)/2;Q.drawStretchImage(Y,Q.getImage(C),"fill",0,S,P,P),Y.restore()},$15h:function(r){var h=this,k=r.getId(),M=h._view.querySelector(".palette-toggle-icon-"+k),w=r.isExpanded()?Q.paletteCollapseIcon:Q.paletteExpandIcon;if(M&&w){var X=h.$19h(),s=h.$20h();h.$16h(M,w,X,s)}},_drawToolsIcon:function(v){var W=this,Q=v.s("tools");if(Q)for(var C=0;C<Q.length;C++){var L=W._view.querySelector(".palette-header-tool"+v.getId()+"-"+C),s=Q[C].icon,E=W.$19h(),R=W.$20h();W.$16h(L,s,E,R)}},$14h:function(C){var f=this,Z=C.getId(),O=f.$10h[Z].querySelector(".image-box"),I=C.getImage(),p=C.s("image.stretch");if(O&&I){var g=l.initContext(O),J=f.getItemImagePadding();J="smallicons"===f._layout?J/2:J;var t=f.getItemImageWidth()-2*J,X=f.getItemImageHeight()-2*J;l.translateAndScale(g,0,0,1),g.clearRect(0,0,t,X),Q.drawStretchImage(g,Q.getImage(I),p,J,J,t,X,C,f),g.restore()}},validateImpl:function(){var J,C,t,u=this,x=u.$9h,e=u._layout,Z=u.$10h,V=u.$4h,Y=u._view,n=u.dm();if(u.$13h&&(delete u.$13h,V={},n.each(function(X){V[X.getId()]=X})),"smallicons"===e)for(var v in V){var G=V[v];if(G instanceof r){var A=G.getName()||"",E=Q.getTextSize(Q.paletteContentLabelFont,A).width;u.$21h!=B&&u.$21h>E||(u.$21h=E)}}for(var v in V){t=V[v];var U,k;if(n.contains(t)){if(t instanceof ht.Group){var M,s=u.$1h(t),O=Z[t.getId()];O&&(M=O.nextSibling,L(Y,M),L(Y,O)),C=n.getSiblings(t).indexOf(t);var f=Y.children[2*C]||u._79O;f&&f.parentNode?(Y.insertBefore(s[0],f),Y.insertBefore(M||s[1],f)):(Y.appendChild(s[0]),Y.appendChild(M||s[1])),Z[t.getId()]=s[0],J=x[t.getId()]=M||s[1],k=t.$12h;var K=t.s("promptText");k||(t.$12h=N("div"),t.$12h[d]=K||"",k=t.$12h),0===t.getChildren().size()?J.contains(k)||I(J,k):J.contains(k)&&L(J,k)}else if(U=t.getParent()){var h=u.$2h(t),c=Z[t.getId()];J=x[U.getId()],c&&L(c.parentNode,c),C=n.getSiblings(t).indexOf(t);var $=J.children[C];$?J.insertBefore(h,$):I(J,h),Z[t.getId()]=h,u.$14h(t)}}else{var D=Z[t.getId()],w=D.parentNode;if(t instanceof ht.Group){var l=D.nextSibling;L(Y,D),L(Y,l),delete x[t.getId()]}else L(w,D),0===w.children.length&&(U=n.getDataById(w.$11h),k=U.$12h,k&&!w.contains(k)&&I(w,k));delete Z[t.getId()]}}u.$4h={};var a=function(){var b=u._59I,$=0;u.$32h!=B&&(clearInterval(u.$32h),$=0,delete u.$32h),u.$32h=setInterval(function(){u.$31h(),b===u._59I?($++,$>=2&&(clearInterval(u.$32h),delete u.$32h)):($=0,b=u._59I)},30)};for(var z in x)if(J=x[z],t=n.getDataById(x[z].$11h),u.$15h(t),u._drawToolsIcon(t),t.isExpanded()){if(J.style.maxHeight===0+g){var i=J.scrollHeight+u._itemMargin+g;H(J).duration(200).set(m,i).set("padding-bottom",u._itemMargin+g).end(function(){return function(){a()}}(i))}else J.style.maxHeight=J.scrollHeight+g;J.style.paddingBottom=u._itemMargin+g}else J.style.maxHeight!==0+g&&H(J).duration(200).set(m,q).set("padding-bottom",q).end(function(){return function(){a()}}(J));u.$28h(),u.$31h()},$31h:function(){for(var C=this,A=C._view,c=0,i=A.children,f=0;f<i.length;f++){var I=i[f];I.className&&I.className.indexOf("palette-")>=0&&(c+=I.offsetHeight)}C._59I=c,C.$30h=C.$33h(C.ty());var V=C.ty();A.scrollTop=-V,C._29I={x:0,y:-V,width:A.clientWidth,height:A.clientHeight},b(C._79O,v,-V+g),C._93I()},$33h:function(f){var S=this,D=S._29I.height-S._59I;return D>f&&(f=D),f>0?0:Math.round(f)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(B){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(B.property)<0&&this.redraw(),"translateY"===B.property&&(this.iv(),this._43o())},findDataByName:function(I){for(var T=this.dm().getDatas(),f=0;f<T.size();f++){var F=T.get(f);if(F.getName()===I)return F}},setDataModel:function(x){var u=this,p=u._dataModel,h=u._selectionModel;p!==x&&(p&&(p.umm(u.$6h,u),p.umd(u.$8h,u),p.umh(u.$7h,u),h||p.sm().ums(u.$28h,u)),u._dataModel=x,x.mm(u.$6h,u),x.md(u.$8h,u),x.mh(u.$7h,u),h?h._21I(x):x.sm().ms(u.$28h,u),u.sm().setSelectionMode("single"),u.fp("dataModel",p,x))},$6h:function(z){var u=this,l=u._view,y=z.data,A=u.$4h;"add"===z.kind?A[y.getId()]=y:"remove"===z.kind?A[y.getId()]=y:"clear"===z.kind&&(u.$10h={},u.$9h={},u.$4h={},l[d]=""),u.iv()},$7h:function(C){var y=this,g=C.data;y.$4h[g.getId()]=g,y.iv()},$8h:function(e){var g=this,M=e.data,c=e.property;"expanded"===c?g.iv():(g.$4h[M.getId()]=M,g.iv())},$28h:function(){var E,N=this,U=N.sm(),$="palette-item",m=U.ld();this.dm().each(function(B){E=N.$10h[B.getId()],E&&E[C].indexOf($)>=0&&(B===m?b(E,t,Q.paletteItemSelectBackground):G(E,t))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);