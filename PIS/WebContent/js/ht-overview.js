!function(A,n){"use strict";var f="ht",u=f+".graph.",P=A[f],Y=P.graph,c=P.Default,I=P.Color,q=null,W="px",R=c.getInternal(),p=R.getPinchDist,H=c.preventDefault,E=c.getTouchCount,l=c.startDragging;R.addMethod(c,{overviewBackground:I.widgetBackground,overviewMaskBackground:I.transparent,overviewContentBorderColor:I.widgetBorder,overviewContentBackground:I.background},!0),Y.Overview=function(f){var X=this,Y=X._view=R.createView(1,X);X._canvas=R.createCanvas(Y),Y.style.background=c.overviewBackground,Y.appendChild(X._mask=R.createDiv()),X.setGraphView(f),X.addListeners()},c.def(u+"Overview",n,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:c.overviewMaskBackground,_contentBorderColor:c.overviewContentBorderColor,_contentBackground:c.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(j){var z=this;if(z.gv!==j){var Q=z.gv;z.gv=j,Q&&(Q.removeViewListener(z.handleGraphViewChanged,z),Q.ump(z.handleGraphViewPropertyChanged,z)),j&&(j.addViewListener(z.handleGraphViewChanged,z),j.mp(z.handleGraphViewPropertyChanged,z)),z.fp("graphView",Q,j),z.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(t){this._autoUpdate&&"validate"===t.kind&&this.redraw()},handleGraphViewPropertyChanged:function($){"canvasBackground"===$.property&&this.redraw()},redraw:function(){var l=this;l._redraw||(l._redraw=1,l.iv(50))},validateImpl:function(){var Q=this,D=Q.gv,b=Q._canvas,P=Q.getWidth(),s=Q.getHeight(),Z=Q._redraw;if(D){var G=Q._mask,V=G.style,H=D.getViewRect(),t=D.getScrollRect(),h=t.x,m=t.y,z=t.width,B=t.height,A=Q._rate=Math.max(z/P,B/s),d=Q._x=(P-z/A)/2,r=Q._y=(s-B/A)/2;if(0!==H.width&&0!==H.height||Q.hasRetry||(c.callLater(Q.iv,Q,q),Q.hasRetry=!0),(P!==b.clientWidth||s!==b.clientHeight)&&(R.setCanvas(b,P,s),Z=1),R.isSameRect(t,Q._scrollRect)||(Q._scrollRect=t,Z=1),Z){var L=R.initContext(b),v=D.getDataModel().getBackground()||Q._contentBackground,X=Q._contentBorderColor,M=c.devicePixelRatio;L.clearRect(0,0,P*M,s*M),v&&R.fillRect(L,d*M,r*M,z/A*M,B/A*M,v),R.translateAndScale(L,-h/A+d,-m/A+r,1/A),D._42(L),L.restore(),X&&R.drawBorder(L,X,d*M,r*M,z/A*M,B/A*M)}V.background=Q._maskBackground,V.left=d+(H.x-h)/A+W,V.top=r+(H.y-m)/A+W,V.width=H.width/A+W,V.height=H.height/A+W,Q._redraw=null}else if(Z){var L=R.initContext(b);L.clearRect(0,0,P,s),L.restore(),Q._redraw=null}},center:function(R){var v=this,u=v.gv;if(u){var r=u._zoom,l=u._29I,s=v._rate,Y=v._scrollRect,N=c.getLogicalPoint(R,v._canvas),g=Y.x+(N.x-v._x)*s,y=Y.y+(N.y-v._y)*s;u.setTranslate((l.width/2-g)*r,(l.height/2-y)*r)}},handle_mousedown:function(S){this.handle_touchstart(S)},handleWindowMouseUp:function(L){this.handleWindowTouchEnd(L)},handleWindowMouseMove:function(P){this.handleWindowTouchMove(P)},handle_mousewheel:function(d){this.handleScroll(d,d.wheelDelta)},handle_DOMMouseScroll:function(y){2===y.axis&&this.handleScroll(y,-y.detail)},handleScroll:function(j,M){if(H(j),this.gv){var I=this.gv;M>0?I.scrollZoomIn():0>M&&I.scrollZoomOut()}},handle_touchstart:function(J){if(H(J),this.gv&&c.isLeftButton(J)){var f=this,N=f.gv,m=E(J);1===m?c.isDoubleClick(J)&&N.isResettable()?N.reset():(f.center(J),l(f,J)):2===m&&(f._dist=p(J),l(f,J))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(g){if(this.gv){var W=this,H=W._dist,Q=E(g);1===Q?W.center(g):2===Q&&H!=q&&W.gv.handlePinch(q,p(g),H)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);