!function(t,H,w){"use strict";var P="ht",q=t[P],I=null,T=Math,s=T.abs,O=T.max,Z=Number.MAX_VALUE,V=q.Default,R=V.getInternal(),S=V.clone,N=R.vec3TransformMat4,u=R.appendArray,d=function(){var b=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,c=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,q=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,x=function(Y,D){return D=parseInt(D),D>=0?Y[D-1]:Y[D+Y.length]},J=function(g,Y,y,z,d,c){if(g.vs){var $=x(Y,z),Q=x(Y,d),O=x(Y,c),i=y.matrix,p=g.vs;if(y.flipFace){var l=Q;Q=O,O=l}i?(u(p,N(S($),i)),u(p,N(S(Q),i)),u(p,N(S(O),i))):(u(p,$),u(p,Q),u(p,O))}},l=function(c,S,s,q,z,Z){if(c.vs){var y=x(S,q),v=x(S,z),o=x(S,Z),T=s.flipY;if(s.flipFace){var U=v;v=o,o=U}c.uv.push(y[0],T?1-y[1]:y[1],v[0],T?1-v[1]:v[1],o[0],T?1-o[1]:o[1])}},G=function(d,T,H,c,r,L){if(d.vs){var i=x(T,c),K=x(T,r),m=x(T,L),Y=H.normalMatrix,O=d.ns;if(H.flipFace){var n=K;K=m,m=n}Y?(u(O,N(S(i),Y)),u(O,N(S(K),Y)),u(O,N(S(m),Y))):(u(O,i),u(O,K),u(O,m))}},j=function(o,D,d,s,j,i,C,f){var W=s&&s.length&&f;i[3]===w?(J(o,D,j,i[0],i[1],i[2]),C&&l(o,d,j,C[0],C[1],C[2]),W&&G(o,s,j,f[0],f[1],f[2])):(J(o,D,j,i[0],i[1],i[3]),J(o,D,j,i[1],i[2],i[3]),C&&(l(o,d,j,C[0],C[1],C[3]),l(o,d,j,C[1],C[2],C[3])),W&&(G(o,s,j,f[0],f[1],f[3]),G(o,s,j,f[1],f[2],f[3])))},L=function(x,X,_,W){var g,G,v,H,K,Q,D,N=Z,j=Z,E=Z,S=-Z,$=-Z,i=-Z;for(g in x)for(Q=x[g].vs,D=Q.length,G=0;D>G;G+=3)v=Q[G+0],H=Q[G+1],K=Q[G+2],N>v&&(N=v),j>H&&(j=H),E>K&&(E=K),v>S&&(S=v),H>$&&($=H),K>i&&(i=K);if(_){var B=N+(S-N)/2,q=j+($-j)/2,V=E+(i-E)/2;for(g in x)for(Q=x[g].vs,D=Q.length,G=0;D>G;G+=3)Q[G+0]-=B,Q[G+1]-=q,Q[G+2]-=V}var A,k,w;_?(A=S-N,k=$-j,w=i-E):(A=2*O(s(N),s(S)),k=2*O(s(j),s($)),w=2*O(s(E),s(i))),W.rawS3=[A,k,w];for(g in x){if(Q=x[g].vs,X)for(D=Q.length,G=0;D>G;G+=3)A&&(Q[G+0]/=A),k&&(Q[G+1]/=k),w&&(Q[G+2]/=w);x[g].rawS3=W.rawS3}};return function(P,d,l){if(!P)return I;R.isString(d)&&(d=F(d)),l||(l={}),l.flipY==I&&(l.flipY=!0),(l.s3||l.r3||l.t3||l.mat)&&(l.matrix=R.createWorldMatrix(l.mat,l.s3,l.r3,l.rotationMode,l.t3));var J,w,K,H,k,i,C=[],B=[],p=l.ignoreNormal?I:[],E=l.reverseFlipMtls,z={vs:[],uv:[],ns:p?[]:I},W={htdefault:z},A=P.split("\n"),o=0;for(p&&l.matrix&&(l.normalMatrix=R.createNormalMatrix(l.matrix));o<A.length;o++)if(w=A[o].trim(),0!==w.length&&"#"!==w.charAt(0))if(K=b.exec(w))C.push([parseFloat(K[1]),parseFloat(K[2]),parseFloat(K[3])]);else if(K=c.exec(w))B.push([parseFloat(K[1]),parseFloat(K[2])]);else if(p&&(K=q.exec(w)))l.flipFace?p.push([parseFloat(-K[1]),parseFloat(-K[2]),parseFloat(-K[3])]):p.push([parseFloat(K[1]),parseFloat(K[2]),parseFloat(K[3])]);else if("f"===w[0]){var a=w.split(/\s+/);if(a.length<4)continue;var f,J,m,u=[],Q=[],S=[];for(J=1,m=a.length;m>J;J++)f=a[J].split("/"),u.push(parseInt(f[0],10)),f.length>1&&f[1].length>0&&S.push(parseInt(f[1],10)),f.length>2&&f[2].length>0&&Q.push(parseInt(f[2],10));for(J=0,m=u.length-2;m>J;J++)j(z,C,B,p,l,[u[0],u[J+1],u[J+2]],S.length?[S[0],S[J+1],S[J+2]]:I,Q.length?[Q[0],Q[J+1],Q[J+2]]:I)}else if(/^usemtl /.test(w)&&(H=w.substring(7).trim(),!(z=W[H]))){if(z={name:H,vs:[],uv:[],ns:p?[]:I},l.ignoreMtls&&l.ignoreMtls.indexOf(H)>=0&&delete z.vs,(l.reverseFlip||"*"===E||E&&E.indexOf(H)>=0)&&(z.reverseFlip=!0),d&&(k=d[H],k&&(l.ignoreColor||(z.color=k.kd),!l.ignoreTransparent&&k.d>0&&k.d<1&&(z.transparent=!0,z.opacity=k.d),!l.ignoreImage&&(i=k.map_kd)))){for(i=i.split(" "),J=0;J<i.length;J++)"-o"===i[J]?(z.uvOffset=[parseFloat(i[J+1]),parseFloat(i[J+2])],J+=2):"-s"===i[J]&&(z.uvScale=[parseFloat(i[J+1]),parseFloat(i[J+2])],J+=2);z.image=(l.prefix||"")+i[i.length-1]}W[H]=z}var $=[];for(var s in W){var N=W[s].vs;N&&0!==N.length||$.push(s)}$.forEach(function(t){delete W[t]}),L(W,l.cube,l.center,l);var G=l.shape3d;if(G){var n=[];for(var H in W){var z=W[H];n.rawS3=z.rawS3,n.push(z)}V.setShape3dModel(G,n)}return W}}(),F=function(g){var C={};if(g)for(var o,F,Q,M,w,r,Y=g.split("\n"),k=/\s+/,t=0;t<Y.length;t++)F=Y[t].trim(),0!==F.length&&"#"!==F.charAt(0)&&(Q=F.indexOf(" "),M=(Q?F.substring(0,Q):F).toLowerCase(),w=(Q?F.substring(Q+1):"").trim(),"newmtl"===M?C[w]=o={name:w}:o&&("ka"===M||"kd"===M||"ks"===M?(r=w.split(k,3),o[M]=[parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2]),1]):o[M]="ns"===M||"d"===M?parseFloat(w):w));return C};R.addMethod(V,{loadObj:function(Y,U,c){c=c||{},V.xhrLoad(U?[Y,U]:[Y],function(i){var O,W=c.finishFunc,U=c.shape3d,C=i?d(i[0],i[1],c):null;if(C){if(U)O=V.getShape3dModel(U);else{O=[];for(var Z in C){var R=C[Z];O.rawS3=R.rawS3,O.push(R)}}W&&W(C,O,O.rawS3)}else W&&W(null)},c)},parseObj:function(j,h,u){return d(j,h,u)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);