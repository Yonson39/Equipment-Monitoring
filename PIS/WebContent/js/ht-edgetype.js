!function(m){"use strict";var R="ht",e=m[R],w=Math,L=w.max,d=w.min,l=w.abs,N=w.atan2,E=(w.cos,w.sin,w.ceil),F=e.Default,p=F.getInternal(),T=e.List,P=p.Mat,$=p.getNodeRect,s=p.intersectionLineRect,J=F.getDistance,o=F.setEdgeType,b="left",q="right",X="top",O="bottom",k="edge.type",z="edge.gap",n="edge.center",G="edge.extend",H=function(v,A){return $(v,A).width},f=function(N,V){return $(N,V).height},_=function(e,F){return p.getEdgeAgentPosition(e,F._40I,F.s("edge.source.position"),F.s("edge.source.offset.x"),F.s("edge.source.offset.y"),F.s("edge.source.anchor.x"),F.s("edge.source.anchor.y"))},W=function(C,t){return p.getEdgeAgentPosition(C,t._41I,t.s("edge.target.position"),t.s("edge.target.offset.x"),t.s("edge.target.offset.y"),t.s("edge.target.anchor.x"),t.s("edge.target.anchor.y"))},x=function(S,u){var $=S.s(k),n=S.getEdgeGroup();if(n){var Q=0;if(n.eachSiblingEdge(function(I){u.isVisible(I)&&I.s(k)==$&&Q++}),Q>1)return S.s(z)*(Q-1)/2}return 0},B=function(T,c){var p=T.s(k),M=T.isLooped();if(!T.getEdgeGroup())return M?T.s(z):0;var x,Q=0,N=0,U=0;return T.getEdgeGroup().getSiblings().each(function(d){d.each(function(W){if(W._40I===T._40I&&W.s(k)==p&&c.isVisible(W)){var n=W.s(z);x?(N+=U/2+n/2,U=n):(x=W,U=n),W===T&&(Q=N)}})}),M?N-Q+U:Q-N/2},C=function(Q,n){var t=n.s("edge.corner.radius");return F.toRoundedCorner(Q,t)};p.addMethod(e.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),o("boundary",function(x,d,r,H){H||(d=-d);var X,i=_(r,x),k=W(r,x),L=$(r,x._40I),M=$(r,x._41I),o=new P(N(k.y-i.y,k.x-i.x)),p=J(i,k),h=i.x,w=i.y;return X=o.tf(0,d),i={x:X.x+h,y:X.y+w},X=o.tf(p,d),k={x:X.x+h,y:X.y+w},X=s(i,k,L),X&&(i={x:X[0],y:X[1]}),X=s(i,k,M),X&&(k={x:X[0],y:X[1]}),{points:new T([i,k])}}),o("ripple",function(c,k,r,z){z||(k=-k);var p=_(r,c),j=W(r,c),v=J(p,j),o=d(c.s("edge.offset"),v/2),Q=c.s("edge.ripple.size"),x=c.s("edge.ripple.length"),w=c.s("edge.ripple.both"),H=c.s(n),G=c.s("edge.ripple.elevation"),l=new T,u=c.s("edge.ripple.straight")?null:new T,R=new P(N(j.y-p.y,j.x-p.x));z||(G=-G),v-=2*o,x>0&&(Q=E(v/x));var f=v/Q;u&&u.add(1);for(var s=0;Q>s;s++)u&&u.add(3),0===s?l.add({x:o+f*s,y:H?0:k}):l.add({x:o+f*s,y:k}),l.add({x:o+f*s+f/2,y:G+k}),w&&(G=-G);for(l.add({x:o+v,y:H?0:k}),s=0;s<l.size();s++){var e=R.tf(l.get(s));e.x+=p.x,e.y+=p.y,l.set(s,e)}return{points:l,segments:u}}),o("h.v",function(U,w,G){w=B(U,G);var O=new T,A=U.s(n),t=_(G,U),I=t.x,x=t.y,o=W(G,U),k=o.x,Y=o.y,u=0,b=0,V=k-I,F=Y-x;return A||(u=H(G,U._40I)/2,b=f(G,U._41I)/2),V>=0&&0>=F?(O.add({x:I+u,y:x+w}),O.add({x:k+w,y:x+w}),O.add({x:k+w,y:Y+b})):0>=V&&F>=0?(O.add({x:I-u,y:x+w}),O.add({x:k+w,y:x+w}),O.add({x:k+w,y:Y-b})):V>=0&&F>=0?(O.add({x:I+u,y:x+w}),O.add({x:k-w,y:x+w}),O.add({x:k-w,y:Y-b})):(O.add({x:I-u,y:x+w}),O.add({x:k-w,y:x+w}),O.add({x:k-w,y:Y+b})),C(O,U)}),o("v.h",function(J,U,v){U=B(J,v);var k=new T,z=J.s(n),S=_(v,J),Q=S.x,h=S.y,g=W(v,J),d=g.x,a=g.y,j=0,R=0,x=d-Q,w=a-h;return z||(j=H(v,J._41I)/2,R=f(v,J._40I)/2),x>=0&&0>=w?(k.add({x:Q+U,y:h-R}),k.add({x:Q+U,y:a+U}),k.add({x:d-j,y:a+U})):0>=x&&w>=0?(k.add({x:Q+U,y:h+R}),k.add({x:Q+U,y:a+U}),k.add({x:d+j,y:a+U})):x>=0&&w>=0?(k.add({x:Q-U,y:h+R}),k.add({x:Q-U,y:a+U}),k.add({x:d-j,y:a+U})):(k.add({x:Q-U,y:h-R}),k.add({x:Q-U,y:a+U}),k.add({x:d+j,y:a+U})),C(k,J)}),o("ortho",function(D,w,s){var r=new T,h=D.s(n),e=D.s("edge.ortho"),q=D._40I,A=D._41I,G=_(s,D),p=G.x,E=G.y,m=W(s,D),J=m.x,u=m.y,j=J-p,S=u-E,o=h?0:H(s,q)/2,N=h?0:f(s,q)/2,$=h?0:H(s,A)/2,k=h?0:f(s,A)/2,B=(j-(o+$)*(j>0?1:-1))*e,K=(S-(N+k)*(S>0?1:-1))*e;return l(j)<l(S)?j>=0&&0>=S?(r.add({x:p+w,y:E-N}),r.add({x:p+w,y:E+K+w-N}),r.add({x:J+w,y:E+K+w-N}),r.add({x:J+w,y:u+k})):0>=j&&S>=0?(r.add({x:p+w,y:E+N}),r.add({x:p+w,y:E+K+w+N}),r.add({x:J+w,y:E+K+w+N}),r.add({x:J+w,y:u-k})):j>=0&&S>=0?(r.add({x:p+w,y:E+N}),r.add({x:p+w,y:E+K-w+N}),r.add({x:J+w,y:E+K-w+N}),r.add({x:J+w,y:u-k})):(r.add({x:p+w,y:E-N}),r.add({x:p+w,y:E+K-w-N}),r.add({x:J+w,y:E+K-w-N}),r.add({x:J+w,y:u+k})):j>=0&&0>=S?(r.add({x:p+o,y:E+w}),r.add({x:p+B+w+o,y:E+w}),r.add({x:p+B+w+o,y:u+w}),r.add({x:J-$,y:u+w})):0>=j&&S>=0?(r.add({x:p-o,y:E+w}),r.add({x:p+B+w-o,y:E+w}),r.add({x:p+B+w-o,y:u+w}),r.add({x:J+$,y:u+w})):j>=0&&S>=0?(r.add({x:p+o,y:E+w}),r.add({x:p+B-w+o,y:E+w}),r.add({x:p+B-w+o,y:u+w}),r.add({x:J-$,y:u+w})):(r.add({x:p-o,y:E+w}),r.add({x:p+B-w-o,y:E+w}),r.add({x:p+B-w-o,y:u+w}),r.add({x:J+$,y:u+w})),C(r,D)}),o("flex",function(c,e,P){var E=new T,X=c.s("edge.flex")+x(c,P),V=c.s(n),w=c._40I,i=c._41I,A=_(P,c),Y=A.x,t=A.y,U=W(P,c),q=U.x,o=U.y,r=q-Y,R=o-t,G=V?0:H(P,w)/2,S=V?0:f(P,w)/2,z=V?0:H(P,i)/2,I=V?0:f(P,i)/2,$=r>0?X:-X,M=R>0?X:-X;return l(r)<l(R)?r>=0&&0>=R?(E.add({x:Y+e,y:t-S}),E.add({x:Y+e,y:t+M+e-S}),E.add({x:q+e,y:o-M+e+I}),E.add({x:q+e,y:o+I})):0>=r&&R>=0?(E.add({x:Y+e,y:t+S}),E.add({x:Y+e,y:t+M+e+S}),E.add({x:q+e,y:o-M+e-I}),E.add({x:q+e,y:o-I})):r>=0&&R>=0?(E.add({x:Y+e,y:t+S}),E.add({x:Y+e,y:t+M-e+S}),E.add({x:q+e,y:o-M-e-I}),E.add({x:q+e,y:o-I})):(E.add({x:Y+e,y:t-S}),E.add({x:Y+e,y:t+M-e-S}),E.add({x:q+e,y:o-M-e+I}),E.add({x:q+e,y:o+I})):r>=0&&0>=R?(E.add({x:Y+G,y:t+e}),E.add({x:Y+$+e+G,y:t+e}),E.add({x:q-$+e-z,y:o+e}),E.add({x:q-z,y:o+e})):0>=r&&R>=0?(E.add({x:Y-G,y:t+e}),E.add({x:Y+$+e-G,y:t+e}),E.add({x:q-$+e+z,y:o+e}),E.add({x:q+z,y:o+e})):r>=0&&R>=0?(E.add({x:Y+G,y:t+e}),E.add({x:Y+$-e+G,y:t+e}),E.add({x:q-$-e-z,y:o+e}),E.add({x:q-z,y:o+e})):(E.add({x:Y-G,y:t+e}),E.add({x:Y+$-e-G,y:t+e}),E.add({x:q-$-e+z,y:o+e}),E.add({x:q+z,y:o+e})),C(E,c)}),o("extend.east",function(F,A,M){var X=new T,B=F.s(G)+x(F,M),w=F.s(n),Z=_(M,F),i=Z.x+(w?0:H(M,F._40I)/2),u=Z.y,f=W(M,F),$=f.x+(w?0:H(M,F._41I)/2),m=f.y,j=L(i,$)+B;return u>m?(X.add({x:i,y:u+A}),X.add({x:j+A,y:u+A}),X.add({x:j+A,y:m-A}),X.add({x:$,y:m-A})):(X.add({x:i,y:u-A}),X.add({x:j+A,y:u-A}),X.add({x:j+A,y:m+A}),X.add({x:$,y:m+A})),C(X,F)}),o("extend.west",function(u,t,U){var M=new T,N=u.s(G)+x(u,U),v=u.s(n),e=_(U,u),I=e.x-(v?0:H(U,u._40I)/2),V=e.y,E=W(U,u),A=E.x-(v?0:H(U,u._41I)/2),R=E.y,q=d(I,A)-N;return V>R?(M.add({x:I,y:V+t}),M.add({x:q-t,y:V+t}),M.add({x:q-t,y:R-t}),M.add({x:A,y:R-t})):(M.add({x:I,y:V-t}),M.add({x:q-t,y:V-t}),M.add({x:q-t,y:R+t}),M.add({x:A,y:R+t})),C(M,u)}),o("extend.north",function(z,X,p){var V=new T,j=z.s(G)+x(z,p),q=z.s(n),m=_(p,z),s=m.x,k=m.y-(q?0:f(p,z._40I)/2),e=W(p,z),I=e.x,N=e.y-(q?0:f(p,z._41I)/2),v=d(k,N)-j;return s>I?(V.add({y:k,x:s+X}),V.add({y:v-X,x:s+X}),V.add({y:v-X,x:I-X}),V.add({y:N,x:I-X})):(V.add({y:k,x:s-X}),V.add({y:v-X,x:s-X}),V.add({y:v-X,x:I+X}),V.add({y:N,x:I+X})),C(V,z)}),o("extend.south",function(Z,j,R){var E=new T,F=Z.s(G)+x(Z,R),e=Z.s(n),V=_(R,Z),w=V.x,X=V.y+(e?0:f(R,Z._40I)/2),P=W(R,Z),d=P.x,b=P.y+(e?0:f(R,Z._41I)/2),p=L(X,b)+F;return w>d?(E.add({y:X,x:w+j}),E.add({y:p+j,x:w+j}),E.add({y:p+j,x:d-j}),E.add({y:b,x:d-j})):(E.add({y:X,x:w-j}),E.add({y:p+j,x:w-j}),E.add({y:p+j,x:d+j}),E.add({y:b,x:d+j})),C(E,Z)});var c=function(e,G,s,L,t){if(L.sort(function($,I){var l=$.getSourceAgent()===G?$.getTargetAgent():$.getSourceAgent(),z=I.getSourceAgent()===G?I.getTargetAgent():I.getSourceAgent(),P=l.p(),y=z.p();if(s===b||s===q){if(P.y>y.y)return 1;if(P.y<y.y)return-1}else{if(P.x>y.x)return 1;if(P.x<y.x)return-1}return F.sortFunc($.getId(),I.getId())}),t){for(var E,r,W,A=e.getSourceAgent(),c=e.getTargetAgent(),f=0;f<L.size();f++){var O=L.get(f);O.getSourceAgent()===A&&O.getTargetAgent()===c||O.getTargetAgent()===A&&O.getSourceAgent()===c?(r||(r=new T),r.add(O,0)):r?(W||(W=new T),W.add(O)):(E||(E=new T),E.add(O))}L.clear(),E&&L.addAll(E),r&&L.addAll(r),W&&L.addAll(W)}var $=L.indexOf(e),H=L.size(),p=e.s(z);return{side:s,index:$,size:H,offset:-p*(H-1)/2+p*$}},j=function(I,h,G,B,f){var o=h.s(k);return c(h,G,B,G.getAgentEdges().toList(function(s){return I.isVisible(s)&&s.s(k)===o}),f)},M=function(p,u){var n=p.getSourceAgent()===u?p.getTargetAgent():p.getSourceAgent(),f=u.p(),h=n.p(),s=h.x-f.x,C=h.y-f.y;return s>0&&l(C)<=s?q:0>s&&l(C)<=-s?b:C>0&&l(s)<=C?O:X},D=function(n,K,U){var l=K.s(k),W=M(K,U);return c(K,U,W,U.getAgentEdges().toList(function(X){return n.isVisible(X)&&X.s(k)===l&&M(X,U)===W}))},S=function(e,$){var f=e.getSourceAgent()===$,m=f?e.getTargetAgent():e.getSourceAgent(),T=$.p(),d=m.p();return f?T.y>d.y?X:O:T.x<d.x?q:b},K=function(b,v,m){var V=v.s(k),r=S(v,m);return c(v,m,r,m.getAgentEdges().toList(function(P){return b.isVisible(P)&&P.s(k)===V&&S(P,m)===r}),r===q||r===O)},h=function(s,R){var f=s.getSourceAgent()===R,a=f?s.getTargetAgent():s.getSourceAgent(),d=R.p(),B=a.p();return f?d.x<B.x?q:b:d.y>B.y?X:O},i=function(o,M,A){var j=M.s(k),d=h(M,A);return c(M,A,d,A.getAgentEdges().toList(function(Y){return o.isVisible(Y)&&Y.s(k)===j&&h(Y,A)===d}),d===q||d===O)},v=function(D,t,Q){var E=D.getSourceAgent(),v=D.getTargetAgent(),r=E.getId()>v.getId(),o=r?v:E,u=r?E:v,z=o.p(),U=u.p(),d=Q(t,D,o),l=Q(t,D,u),m=D.s(n),R=m?0:H(t,o)/2,V=m?0:H(t,u)/2,c=m?0:f(t,o)/2,x=m?0:f(t,u)/2,j=d.offset,w=l.offset,s=d.side,G=l.side,A=new T;return s===X?(A.add({x:z.x+j,y:z.y-c}),A.add({x:z.x+j,y:U.y+w}),G===b?A.add({x:U.x-V,y:U.y+w}):A.add({x:U.x+V,y:U.y+w})):s===O?(A.add({x:z.x+j,y:z.y+c}),A.add({x:z.x+j,y:U.y+w}),G===b?A.add({x:U.x-V,y:U.y+w}):A.add({x:U.x+V,y:U.y+w})):s===b?(A.add({x:z.x-R,y:z.y+j}),A.add({x:U.x+w,y:z.y+j}),G===O?A.add({x:U.x+w,y:U.y+x}):A.add({x:U.x+w,y:U.y-x})):s===q&&(A.add({x:z.x+R,y:z.y+j}),A.add({x:U.x+w,y:z.y+j}),G===O?A.add({x:U.x+w,y:U.y+x}):A.add({x:U.x+w,y:U.y-x})),r&&A.reverse(),C(A,D)};o("ortho2",function(L,o,N){var Y,F,A=L.s(n),h=L.s("edge.ortho"),$=L.getSourceAgent(),m=L.getTargetAgent(),E=$.getId()>m.getId(),B=E?m:$,g=E?$:m,p=B.p(),G=g.p(),c=D(N,L,B),e=D(N,L,g),r=A?0:H(N,B)/2,K=A?0:f(N,B)/2,z=A?0:H(N,g)/2,Z=A?0:f(N,g)/2,x=new T,Q=c.offset,W=e.offset,P=c.side;return P===q?(Y=G.y>p.y?-Q:Q,F=p.x+r+(G.x-z-p.x-r)*h,x.add({x:p.x+r,y:p.y+Q}),x.add({x:F+Y,y:p.y+Q}),x.add({x:F+Y,y:G.y+W}),x.add({x:G.x-z,y:G.y+W})):P===b?(Y=G.y>p.y?-Q:Q,F=p.x-r-(p.x-r-G.x-z)*h,x.add({x:p.x-r,y:p.y+Q}),x.add({x:F-Y,y:p.y+Q}),x.add({x:F-Y,y:G.y+W}),x.add({x:G.x+z,y:G.y+W})):P===O?(Y=G.x>p.x?-Q:Q,F=p.y+K+(G.y-Z-p.y-K)*h,x.add({x:p.x+Q,y:p.y+K}),x.add({x:p.x+Q,y:F+Y}),x.add({x:G.x+W,y:F+Y}),x.add({x:G.x+W,y:G.y-Z})):P===X&&(Y=G.x>p.x?-Q:Q,F=p.y-K-(p.y-K-G.y-Z)*h,x.add({x:p.x+Q,y:p.y-K}),x.add({x:p.x+Q,y:F-Y}),x.add({x:G.x+W,y:F-Y}),x.add({x:G.x+W,y:G.y+Z})),E&&x.reverse(),C(x,L)},!0),o("flex2",function(d,_,V){var Z,m=d.getSourceAgent(),U=d.getTargetAgent(),i=m.getId()>U.getId(),k=i?U:m,L=i?m:U,e=k.p(),E=L.p(),s=D(V,d,k),h=D(V,d,L),c=d.s(n),g=d.s("edge.flex")+(s.size-1)/2*d.s(z),o=c?0:H(V,k)/2,Y=c?0:f(V,k)/2,r=c?0:H(V,L)/2,u=c?0:f(V,L)/2,y=new T,w=s.offset,F=h.offset,B=s.side;return B===q?(Z=E.y>e.y?-w:w,y.add({x:e.x+o,y:e.y+w}),y.add({x:e.x+o+g+Z,y:e.y+w}),y.add({x:E.x-r-g+Z,y:E.y+F}),y.add({x:E.x-r,y:E.y+F})):B===b?(Z=E.y>e.y?-w:w,y.add({x:e.x-o,y:e.y+w}),y.add({x:e.x-o-g-Z,y:e.y+w}),y.add({x:E.x+r+g-Z,y:E.y+F}),y.add({x:E.x+r,y:E.y+F})):B===O?(Z=E.x>e.x?-w:w,y.add({x:e.x+w,y:e.y+Y}),y.add({x:e.x+w,y:e.y+Y+g+Z}),y.add({x:E.x+F,y:E.y-u-g+Z}),y.add({x:E.x+F,y:E.y-u})):B===X&&(Z=E.x>e.x?-w:w,y.add({x:e.x+w,y:e.y-Y}),y.add({x:e.x+w,y:e.y-Y-g-Z}),y.add({x:E.x+F,y:E.y+u+g-Z}),y.add({x:E.x+F,y:E.y+u})),i&&y.reverse(),C(y,d)},!0),o("extend.north2",function(B,O,L){var r=B.getSourceAgent(),h=B.getTargetAgent(),x=r.getId()>h.getId(),K=x?h:r,Y=x?r:h,E=K.p(),o=Y.p(),N=j(L,B,K,X),H=j(L,B,Y,X,!0),_=B.s(n),i=_?0:f(L,K)/2,Q=_?0:f(L,Y)/2,F=N.offset,w=H.offset,A=B.s(G)+(N.size-1)/2*B.s(z),p=d(E.y-i,o.y-Q)-A+(E.x<o.x?F:-F),V=new T;return V.add({x:E.x+F,y:E.y-i}),V.add({x:E.x+F,y:p}),V.add({x:o.x+w,y:p}),V.add({x:o.x+w,y:o.y-Q}),x&&V.reverse(),C(V,B)},!0),o("extend.south2",function(k,D,v){var e=k.getSourceAgent(),J=k.getTargetAgent(),i=e.getId()>J.getId(),q=i?J:e,d=i?e:J,h=q.p(),$=d.p(),x=j(v,k,q,O),_=j(v,k,d,O,!0),u=k.s(n),U=u?0:f(v,q)/2,H=u?0:f(v,d)/2,p=x.offset,P=_.offset,w=k.s(G)+(x.size-1)/2*k.s(z),l=L(h.y+U,$.y+H)+w+(h.x>$.x?p:-p),I=new T;return I.add({x:h.x+p,y:h.y+U}),I.add({x:h.x+p,y:l}),I.add({x:$.x+P,y:l}),I.add({x:$.x+P,y:$.y+H}),i&&I.reverse(),C(I,k)},!0),o("extend.west2",function(I,W,$){var p=I.getSourceAgent(),e=I.getTargetAgent(),v=p.getId()>e.getId(),t=v?e:p,k=v?p:e,J=t.p(),_=k.p(),B=j($,I,t,X),o=j($,I,k,X,!0),h=I.s(n),U=h?0:H($,t)/2,M=h?0:H($,k)/2,y=B.offset,g=o.offset,r=I.s(G)+(B.size-1)/2*I.s(z),Y=d(J.x-U,_.x-M)-r+(J.y<_.y?y:-y),A=new T;return A.add({x:J.x-U,y:J.y+y}),A.add({x:Y,y:J.y+y}),A.add({x:Y,y:_.y+g}),A.add({x:_.x-M,y:_.y+g}),v&&A.reverse(),C(A,I)},!0),o("extend.east2",function(o,r,$){var P=o.getSourceAgent(),S=o.getTargetAgent(),v=P.getId()>S.getId(),k=v?S:P,K=v?P:S,W=k.p(),Y=K.p(),l=j($,o,k,X),R=j($,o,K,X,!0),y=o.s(n),D=y?0:H($,k)/2,q=y?0:H($,K)/2,x=l.offset,t=R.offset,M=o.s(G)+(l.size-1)/2*o.s(z),I=L(W.x+D,Y.x+q)+M+(W.y>Y.y?x:-x),U=new T;return U.add({x:W.x+D,y:W.y+x}),U.add({x:I,y:W.y+x}),U.add({x:I,y:Y.y+t}),U.add({x:Y.x+q,y:Y.y+t}),v&&U.reverse(),C(U,o)},!0),o("v.h2",function(z,M,q){return v(z,q,K)},!0),o("h.v2",function(M,h,$){return v(M,$,i)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);